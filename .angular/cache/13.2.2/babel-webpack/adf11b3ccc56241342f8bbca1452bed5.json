{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./../services/authentication/auth.service\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"./../services/internet/online.service\";\nimport * as i5 from \"./../services/ui/confirm-delete-dialog.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/expansion\";\nimport * as i8 from \"@angular/material/card\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/forms\";\nimport * as i12 from \"@angular/material/button\";\nimport * as i13 from \"@angular/material/list\";\nimport * as i14 from \"@angular/material/core\";\nimport * as i15 from \"@angular/material/tooltip\";\nimport * as i16 from \"@angular/material/icon\";\nimport * as i17 from \"@angular/material/progress-spinner\";\nimport * as i18 from \"@angular/router\";\nimport * as i19 from \"../no-internet/no-internet.component\";\n\nfunction AdminManageComponent_ng_container_1_ng_container_1_ng_container_3_mat_expansion_panel_15_mat_list_item_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-list-item\", 0);\n    i0.ɵɵelementStart(1, \"pre\", 10);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"pre\", 10);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function AdminManageComponent_ng_container_1_ng_container_1_ng_container_3_mat_expansion_panel_15_mat_list_item_5_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const admin_r13 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(5);\n      return ctx_r14.deleteAdmin(admin_r13.id);\n    });\n    i0.ɵɵelementStart(6, \"mat-icon\", 12);\n    i0.ɵɵtext(7, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const admin_r13 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(admin_r13.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(admin_r13.email);\n  }\n}\n\nfunction AdminManageComponent_ng_container_1_ng_container_1_ng_container_3_mat_expansion_panel_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-expansion-panel\");\n    i0.ɵɵelementStart(1, \"mat-expansion-panel-header\");\n    i0.ɵɵelementStart(2, \"mat-panel-title\");\n    i0.ɵɵtext(3, \" Admin List \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-list\");\n    i0.ɵɵtemplate(5, AdminManageComponent_ng_container_1_ng_container_1_ng_container_3_mat_expansion_panel_15_mat_list_item_5_Template, 8, 2, \"mat-list-item\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r11.admins);\n  }\n}\n\nfunction AdminManageComponent_ng_container_1_ng_container_1_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"mat-accordion\");\n    i0.ɵɵelementStart(2, \"mat-expansion-panel\");\n    i0.ɵɵelementStart(3, \"mat-expansion-panel-header\");\n    i0.ɵɵelementStart(4, \"mat-panel-title\");\n    i0.ɵɵtext(5, \" Add or Set Admin \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"mat-card\");\n    i0.ɵɵelementStart(7, \"mat-card-content\");\n    i0.ɵɵelementStart(8, \"mat-form-field\");\n    i0.ɵɵelementStart(9, \"input\", 6);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminManageComponent_ng_container_1_ng_container_1_ng_container_3_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext(3);\n      return ctx_r16.uid = $event;\n    })(\"change\", function AdminManageComponent_ng_container_1_ng_container_1_ng_container_3_Template_input_change_9_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r18 = i0.ɵɵnextContext(3);\n      ctx_r18.trim();\n      return ctx_r18.updateButtonText();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"mat-form-field\");\n    i0.ɵɵelementStart(11, \"input\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminManageComponent_ng_container_1_ng_container_1_ng_container_3_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r19 = i0.ɵɵnextContext(3);\n      return ctx_r19.email = $event;\n    })(\"change\", function AdminManageComponent_ng_container_1_ng_container_1_ng_container_3_Template_input_change_11_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r20 = i0.ɵɵnextContext(3);\n      ctx_r20.trim();\n      return ctx_r20.updateButtonText();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"br\");\n    i0.ɵɵelementStart(13, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function AdminManageComponent_ng_container_1_ng_container_1_ng_container_3_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r21 = i0.ɵɵnextContext(3);\n      return ctx_r21.addAdmin();\n    });\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, AdminManageComponent_ng_container_1_ng_container_1_ng_container_3_mat_expansion_panel_15_Template, 6, 1, \"mat-expansion-panel\", 1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r9 = i0.ɵɵreference(7);\n\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.uid);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r6.uid.trim() || !ctx_r6.email.trim());\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.buttonText, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.admins.length)(\"ngIfElse\", _r9);\n  }\n}\n\nfunction AdminManageComponent_ng_container_1_ng_container_1_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵelement(1, \"mat-spinner\", 14);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AdminManageComponent_ng_container_1_ng_container_1_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \" No admins have been found! This could mean that you are not connected to the internet (which you can easily test by checking your network settings or trying to open another website) or that our server is down. This could also mean that no admins exist, in which case please add an admin. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AdminManageComponent_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h1\");\n    i0.ɵɵtext(2, \"Admins\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, AdminManageComponent_ng_container_1_ng_container_1_ng_container_3_Template, 16, 6, \"ng-container\", 1);\n    i0.ɵɵtemplate(4, AdminManageComponent_ng_container_1_ng_container_1_ng_template_4_Template, 2, 0, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(6, AdminManageComponent_ng_container_1_ng_container_1_ng_template_6_Template, 2, 0, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r7 = i0.ɵɵreference(5);\n\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.isLoading)(\"ngIfElse\", _r7);\n  }\n}\n\nfunction AdminManageComponent_ng_container_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵtext(1, \"ERROR: You are not the superadmin.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵtext(3, \" It seems that you are no longer the superadmin, and as such you cannot access this page. \");\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵtext(5, \" Please press \\\"Go to Home\\\" to return to the home page of this website. \");\n    i0.ɵɵelement(6, \"br\");\n    i0.ɵɵelementStart(7, \"a\", 15);\n    i0.ɵɵtext(8, \"Go to Home\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AdminManageComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AdminManageComponent_ng_container_1_ng_container_1_Template, 8, 2, \"ng-container\", 1);\n    i0.ɵɵtemplate(2, AdminManageComponent_ng_container_1_ng_template_2_Template, 9, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r4 = i0.ɵɵreference(3);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.auth.isSuperadmin)(\"ngIfElse\", _r4);\n  }\n}\n\nfunction AdminManageComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-no-internet\");\n  }\n}\n\nexport let AdminManageComponent = /*#__PURE__*/(() => {\n  class AdminManageComponent {\n    constructor(auth, titleService, metaService, snackBar, onlineService, confirmDeleteDialogService) {\n      this.auth = auth;\n      this.titleService = titleService;\n      this.metaService = metaService;\n      this.snackBar = snackBar;\n      this.onlineService = onlineService;\n      this.confirmDeleteDialogService = confirmDeleteDialogService;\n      this.email = '';\n      this.uid = '';\n      this.buttonText = 'Add Admin';\n      this.isLoading = true;\n    }\n\n    ngOnInit() {\n      this.titleService.setTitle(\"Prasham's Portfolio - Admins\");\n      this.metaService.updateTag({\n        name: 'description',\n        content: \"This is the admin page of Prasham Shah's portfolio website. On this page he manages the website. If anyone besides him tries to access this page, he or she will be redirected back to the home page.\"\n      });\n      this.adminSubscription = this.auth.getAdmins(() => {\n        this.snackBar.open('Could not retrieve admins because of an error from the server', 'OK', {\n          panelClass: ['snackbar', 'danger-snackbar']\n        });\n        this.admins = [];\n        this.isLoading = false;\n      }, () => {\n        this.snackBar.open('Could not retrieve admins because you are offline', 'OK', {\n          panelClass: ['snackbar', 'danger-snackbar']\n        });\n        this.admins = [];\n        this.isLoading = false;\n      }).subscribe(admins => {\n        if (admins != null) {\n          this.admins = admins;\n          this.isLoading = false;\n        } else {\n          this.admins = [];\n          this.isLoading = false;\n        }\n      });\n    }\n\n    ngOnDestroy() {\n      if (this.adminSubscription) {\n        this.adminSubscription.unsubscribe();\n      }\n\n      if (this.timeoutReference) {\n        window.clearTimeout(this.timeoutReference);\n      }\n    }\n\n    addAdmin() {\n      this.trim();\n      const emailIsValid = /^([a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)$/.test(this.email.trim());\n\n      if (this.uid.trim() && this.email.trim() && emailIsValid) {\n        const buttonText = this.uidExists() ? 'Admin Updated!' : 'Admin Added!';\n        const data = {\n          email: this.email.trim()\n        };\n        this.auth.addAdmin(this.uid.trim(), data, () => {\n          this.uid = '';\n          this.email = '';\n          this.buttonText = buttonText;\n\n          if (this.timeoutReference) {\n            window.clearTimeout(this.timeoutReference);\n          }\n\n          this.timeoutReference = window.setTimeout(() => {\n            this.updateButtonText();\n          }, 3000);\n        }, () => {\n          this.snackBar.open('Could not add admin because of an error from the server', 'OK', {\n            panelClass: ['snackbar', 'danger-snackbar']\n          });\n        }, () => {\n          this.snackBar.open('Could not add admin because your are offline', 'OK', {\n            panelClass: ['snackbar', 'danger-snackbar']\n          });\n        }).subscribe();\n      } else {\n        this.snackBar.open('Could not add admin due a to lack of information and/or invalid input', 'OK', {\n          panelClass: ['snackbar', 'danger-snackbar']\n        });\n      }\n    }\n\n    deleteAdmin(id) {\n      this.confirmDeleteDialogService.openConfirmDeleteDialog('admin').subscribe(shouldDelete => {\n        if (shouldDelete) {\n          this.auth.deleteAdmin(id, () => {\n            this.snackBar.open('Could not delete admin because of an error from the server', 'OK', {\n              panelClass: ['snackbar', 'danger-snackbar']\n            });\n          }, () => {\n            this.snackBar.open('Could not delete admin because you are offline', 'OK', {\n              panelClass: ['snackbar', 'danger-snackbar']\n            });\n          }).subscribe();\n        }\n      });\n    }\n\n    uidExists() {\n      if (this.admins) {\n        const uidExists = this.admins.some(admin => {\n          return admin.id === this.uid;\n        });\n        return uidExists;\n      } else {\n        return false;\n      }\n    }\n\n    updateButtonText() {\n      if (this.uidExists()) {\n        this.buttonText = 'Set Admin';\n      } else {\n        this.buttonText = 'Add Admin';\n      }\n    }\n\n    trim() {\n      this.uid = this.uid.trim();\n      this.email = this.email.trim();\n    }\n\n  }\n\n  AdminManageComponent.ɵfac = function AdminManageComponent_Factory(t) {\n    return new (t || AdminManageComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Title), i0.ɵɵdirectiveInject(i2.Meta), i0.ɵɵdirectiveInject(i3.MatSnackBar), i0.ɵɵdirectiveInject(i4.OnlineService), i0.ɵɵdirectiveInject(i5.ConfirmDeleteDialogService));\n  };\n\n  AdminManageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AdminManageComponent,\n    selectors: [[\"app-admin-manage\"]],\n    decls: 5,\n    vars: 4,\n    consts: [[1, \"content\"], [4, \"ngIf\", \"ngIfElse\"], [\"noInternet\", \"\"], [\"notSuperadmin\", \"\"], [\"loading\", \"\"], [\"noAdmins\", \"\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"User ID\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"matInput\", \"\", \"type\", \"email\", \"placeholder\", \"Email\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", 3, \"disabled\", \"click\"], [\"class\", \"content\", 4, \"ngFor\", \"ngForOf\"], [\"mat-line\", \"\"], [\"mat-icon-button\", \"\", \"aria-label\", \"delete\", \"matTooltip\", \"delete admin\", 3, \"click\"], [\"mat-list-icon\", \"\"], [\"align\", \"center\"], [\"diameter\", \"50\"], [\"routerLink\", \"/\", \"mat-raised-button\", \"\"]],\n    template: function AdminManageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, AdminManageComponent_ng_container_1_Template, 4, 2, \"ng-container\", 1);\n        i0.ɵɵpipe(2, \"async\");\n        i0.ɵɵtemplate(3, AdminManageComponent_ng_template_3_Template, 1, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(4);\n\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 2, ctx.onlineService.isOnline))(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [i6.NgIf, i7.MatAccordion, i7.MatExpansionPanel, i7.MatExpansionPanelHeader, i7.MatExpansionPanelTitle, i8.MatCard, i8.MatCardContent, i9.MatFormField, i10.MatInput, i11.DefaultValueAccessor, i11.NgControlStatus, i11.NgModel, i12.MatButton, i13.MatList, i6.NgForOf, i13.MatListItem, i14.MatLine, i15.MatTooltip, i16.MatIcon, i13.MatListIconCssMatStyler, i17.MatSpinner, i18.RouterLinkWithHref, i12.MatAnchor, i19.NoInternetComponent],\n    pipes: [i6.AsyncPipe],\n    styles: [\"mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-line[_ngcontent-%COMP%]{word-wrap:break-word;white-space:pre-wrap}.mat-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:initial}\"]\n  });\n  return AdminManageComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}